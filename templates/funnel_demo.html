<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Funil de Vendas - Demo/Teste</title>
    <link rel="stylesheet" href="/static/css/funnel_demo.css">
</head>
<body>
    <div class="demo-controls">
        <h2>üéÆ Controles de Teste - Funil de Vendas</h2>
        
        <div class="controls-row">
            <div class="control-group">
                <label for="valueSlider">Valor do Faturamento (R$)</label>
                <input type="range" id="valueSlider" min="0" max="1500000" step="1000" value="49036">
                <div class="value-display" id="valueDisplay">R$ 49.036</div>
            </div>
        </div>

        <div class="button-group">
            <button class="btn btn-primary" onclick="setValue(0)">Resetar (R$ 0)</button>
            <button class="btn btn-success" onclick="setValue(300000)">R$ 300k</button>
            <button class="btn btn-success" onclick="setValue(600000)">R$ 600k</button>
            <button class="btn btn-success" onclick="setValue(900000)">R$ 900k</button>
            <button class="btn btn-success" onclick="setValue(1200000)">R$ 1.2M</button>
            <button class="btn btn-warning" onclick="setValue(1500000)">Meta (R$ 1.5M)</button>
            <button class="btn btn-primary" onclick="toggleSimulation()">üé¨ Simula√ß√£o Autom√°tica</button>
            <button class="btn btn-danger" onclick="stopSimulation()">‚èπÔ∏è Parar Simula√ß√£o</button>
        </div>

        <div class="simulation-status" id="simulationStatus">
            <strong>Status:</strong> <span id="statusText">Parado</span>
        </div>
    </div>

    <div class="container">
        <div class="funnel-container">
            <div class="funnel-main-value" id="mainValue">R$ 1.500.000</div>
            
            <div class="funnel-wrapper" id="funnelWrapper">
                <div class="funnel-shape">
                    <div class="funnel-fill" id="funnelFill"></div>
                    
                    <!-- Marcos do funil -->
                    <div class="milestone" style="top: 20%;" data-value="1200000">
                        <span class="milestone-label">R$ 1.200.000</span>
                    </div>
                    <div class="milestone" style="top: 40%;" data-value="900000">
                        <span class="milestone-label">R$ 900.000</span>
                    </div>
                    <div class="milestone" style="top: 60%;" data-value="600000">
                        <span class="milestone-label">R$ 600.000</span>
                    </div>
                    <div class="milestone" style="top: 80%;" data-value="300000">
                        <span class="milestone-label">R$ 300.000</span>
                    </div>
                </div>
            </div>
            
            <div class="current-value-indicator" id="currentIndicator"></div>
            <svg class="value-connection-line" id="connectionLine">
                <line id="connectionLinePath" x1="0" y1="0" x2="0" y2="0" stroke="white" stroke-width="2" opacity="0.9"/>
            </svg>
            
            <div class="cso-image" id="csoImage">
                <img src="/static/img/allan_santos.png" alt="CSO Allan Santos" class="mouth-closed">
                <img src="/static/img/allan_santos_boca_aberta.png" alt="CSO Allan Santos" class="mouth-open">
            </div>
            <div class="speech-bubble" id="speechBubble">
                <span class="speech-text" id="speechText">MA√îEEEEEE</span>
            </div>
        </div>
    </div>

    <script src="/static/javascript/funnel_demo.js"></script>

    <!-- Twemoji para emojis consistentes -->
    <script src="https://unpkg.com/twemoji@latest/dist/twemoji.min.js" crossorigin="anonymous"></script>
    <script>
        // Aplica Twemoji assim que a p√°gina carregar
        window.addEventListener('DOMContentLoaded', () => {
            console.log('üé® Aplicando Twemoji nas Metas...');
            if (typeof twemoji !== 'undefined') {
                twemoji.parse(document.body, {
                    base: 'https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/'
                });
                console.log('‚úÖ Twemoji aplicado com sucesso nas Metas!');
            } else {
                console.error('‚ùå Twemoji n√£o carregado!');
            }
        });
    </script>
</body>
</html>
